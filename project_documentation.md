# توثيق تطبيق "Zakrni – ذكرني"

## نظرة عامة
"Zakrni – ذكرني" هو تطبيق إسلامي يساعد المسلمين على معرفة أوقات الصلاة في مختلف محافظات مصر، كما يوفر مجموعة شاملة من الأذكار اليومية مثل أذكار الصباح والمساء وأذكار ما بعد الصلاة وأذكار النوم والاستيقاظ.

## بنية المشروع

### المجلدات الرئيسية
- **android/**: يحتوي على ملفات مشروع Android
- **ios/**: يحتوي على ملفات مشروع iOS
- **web/**: يحتوي على ملفات الويب للتطبيق
- **lib/**: يحتوي على كود المصدر الرئيسي للتطبيق
- **assets/**: يحتوي على الموارد الثابتة مثل الصور والخطوط
- **test/**: يحتوي على اختبارات التطبيق
- **build/**: يحتوي على ملفات البناء المؤقتة (يتم إنشاؤه تلقائيًا)

### هيكل مجلد lib
مجلد `lib` هو المجلد الرئيسي الذي يحتوي على كود المصدر للتطبيق، وينقسم إلى المجلدات التالية:

- **l10n/**: يحتوي على ملفات الترجمة والتعريب
- **models/**: يحتوي على نماذج البيانات المستخدمة في التطبيق
- **screens/**: يحتوي على شاشات التطبيق المختلفة
- **services/**: يحتوي على الخدمات المختلفة مثل خدمات API وخدمات التخزين
- **theme/**: يحتوي على تعريفات السمات والألوان للتطبيق
- **widgets/**: يحتوي على الويدجت المخصصة المستخدمة في التطبيق

### هيكل مجلد screens
مجلد `screens` يحتوي على شاشات التطبيق المختلفة، وينقسم إلى:

- **auth/**: شاشات المصادقة (إن وجدت)
- **azkar/**: شاشات الأذكار المختلفة
- **legal/**: الشاشات القانونية مثل سياسة الخصوصية

## الملفات الرئيسية

### main.dart
نقطة الدخول الرئيسية للتطبيق. يقوم بتهيئة التطبيق وإعداد مزود اللغة وتشغيل التطبيق الرئيسي.

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  final prefs = await SharedPreferences.getInstance();
  final String languageCode = prefs.getString('language_code') ?? 'en';
  
  runApp(
    ChangeNotifierProvider(
      create: (_) => AppLanguage(languageCode),
      child: const MyApp(),
    ),
  );
}
```

### settings_page.dart
يحتوي على شاشة الإعدادات التي تسمح للمستخدم بتغيير لغة التطبيق وإعدادات أزرار إعادة تعيين العدادات.

### package_info_plus_web_shim.dart
يوفر واجهة متوافقة مع الويب لحزمة package_info_plus.

### أذكار الصباح والمساء
تطبيق "Zakrni – ذكرني" يحتوي على مجموعة شاملة من الأذكار:

1. **أذكار الصباح (morning_azkar.dart)**: 
   - مجموعة من 30 ذكر صباحي أصيل باللغتين العربية والإنجليزية
   - كل ذكر يحتوي على النص العربي والنطق والترجمة الإنجليزية وعدد التكرار

2. **أذكار المساء (evening_azkar.dart)**:
   - مجموعة من 30 ذكر مسائي أصيل باللغتين العربية والإنجليزية
   - تشمل أذكار الحماية من الشر والمخاوف أثناء الليل والاستعاذة من عذاب القبر

3. **أذكار ما بعد الصلاة (after_prayer_azkar.dart)**:
   - أذكار تقال بعد الصلوات المفروضة
   - تشمل التسبيح والتحميد والتكبير وأذكار أخرى

4. **أذكار النوم (sleep_azkar.dart)**:
   - أذكار تقال قبل النوم للحماية والبركة
   - تشمل آية الكرسي والمعوذات وأدعية النوم

5. **أذكار الاستيقاظ (waking_azkar.dart)**:
   - مجموعة من 10 أذكار أصيلة للاستيقاظ باللغتين العربية والإنجليزية
   - تشمل أذكار الاستيقاظ، إعلان الإيمان بعد الاستيقاظ، ارتداء الملابس، دخول الخلاء والخروج منه، الوضوء، الإفطار، الخروج من المنزل، دخول المنزل، والذهاب إلى المسجد

## الحزم المستخدمة (Dependencies)

### الحزم الأساسية
- **flutter**: إطار العمل الأساسي لتطوير التطبيق
- **flutter_localizations**: لدعم التعريب والترجمة
- **intl**: للتنسيق والترجمة

### حزم إدارة الحالة والبيانات
- **provider (6.0.5)**: لإدارة حالة التطبيق
- **shared_preferences (2.2.0)**: لتخزين البيانات المحلية مثل إعدادات اللغة وحالة العدادات

### حزم الواجهة والتفاعل
- **cupertino_icons (^1.0.8)**: أيقونات iOS
- **url_launcher (^6.2.5)**: لفتح الروابط الخارجية مثل روابط وسائل التواصل الاجتماعي

### حزم أخرى
- **http (1.1.0)**: لإجراء طلبات HTTP
- **package_info_plus (^5.0.1)**: للحصول على معلومات حزمة التطبيق
- **flutter_gen (^5.10.0)**: لتوليد الموارد

## ميزات التطبيق الرئيسية

### 1. عرض أوقات الصلاة
يوفر التطبيق أوقات الصلاة لمختلف محافظات مصر.

### 2. الأذكار اليومية
يحتوي التطبيق على مجموعة شاملة من الأذكار اليومية:
- أذكار الصباح (30 ذكر)
- أذكار المساء (30 ذكر)
- أذكار ما بعد الصلاة
- أذكار النوم
- أذكار الاستيقاظ (10 أذكار)

### 3. عدادات الأذكار
- كل ذكر له عداد لمساعدة المستخدم على تتبع عدد المرات التي قال فيها الذكر
- يمكن إعادة تعيين العدادات بشكل فردي أو جماعي
- يمكن تمكين/تعطيل أزرار إعادة التعيين من خلال الإعدادات

### 4. دعم اللغات المتعددة
- يدعم التطبيق اللغتين العربية والإنجليزية
- يمكن تغيير لغة التطبيق من خلال الإعدادات

### 5. الوضع الداكن/الفاتح
يدعم التطبيق الوضع الداكن والفاتح لراحة العين.

## خدمات التطبيق

### ResetCountersService
خدمة تتعامل مع إعادة تعيين عدادات الأذكار وحفظ تفضيلات أزرار إعادة التعيين.

```dart
// مثال على استخدام خدمة إعادة تعيين العدادات
Future<void> _loadResetButtonPreferences() async {
  final showIndividualButtons = await ResetCountersService.getShowIndividualResetButtons();
  final showGlobalButton = await ResetCountersService.getShowGlobalResetButton();
  
  if (mounted) {
    setState(() {
      _showIndividualResetButtons = showIndividualButtons;
      _showGlobalResetButton = showGlobalButton;
    });
  }
}
```

## الويدجت المخصصة

### DhikrCounterButton
زر عداد مخصص لعد الأذكار، يعرض العدد الحالي والعدد الإجمالي المطلوب.

### GlobalResetButton
زر لإعادة تعيين جميع عدادات الأذكار في صفحة معينة.

## التعريب والترجمة
يستخدم التطبيق نظام Flutter للتعريب والترجمة من خلال ملفات ARB:

- **app_ar.arb**: ملف الترجمة العربية
- **app_en.arb**: ملف الترجمة الإنجليزية
- **app_localizations.dart**: ملف مولد تلقائيًا يحتوي على فئة AppLocalizations

## بناء وتصدير التطبيق
يمكن بناء التطبيق لمنصات مختلفة:

### Android
```bash
flutter build apk --release
```
ينتج ملف APK واحد يعمل على جميع أنواع المعالجات.

```bash
flutter build apk --release --split-per-abi
```
ينتج ملفات APK منفصلة لكل نوع معالج (armeabi-v7a, arm64-v8a, x86_64).

### iOS
```bash
flutter build ios --release
```

### الويب
```bash
flutter build web --release
```

## الخاتمة
تطبيق "Zakrni – ذكرني" هو تطبيق شامل للمسلمين يوفر أوقات الصلاة والأذكار اليومية بواجهة سهلة الاستخدام ودعم للغتين العربية والإنجليزية. يتميز التطبيق بتصميم جميل وميزات مفيدة مثل عدادات الأذكار وإمكانية تخصيص الإعدادات.
